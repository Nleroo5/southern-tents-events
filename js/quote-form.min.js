function setMinimumEventDate(){const t=document.getElementById("event-date");if(t){const e=new Date,n=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;t.setAttribute("min",n)}}function initQuantitySelectors(){const t=document.querySelectorAll(".qty-plus"),e=document.querySelectorAll(".qty-minus"),n=document.querySelectorAll(".qty-input");function a(t){const e=t.getAttribute("data-item"),n=document.querySelector(`input[name="${e}"]`),a=t.closest(".quantity-card");if(n){let t=parseInt(n.value)||0;n.value=t+1,updateCardState(a,n.value),n.style.transform="scale(1.1)",setTimeout(()=>{n.style.transform="scale(1)"},200)}}function o(t){const e=t.getAttribute("data-item"),n=document.querySelector(`input[name="${e}"]`),a=t.closest(".quantity-card");if(n){let t=parseInt(n.value)||0;t>0&&(n.value=t-1,updateCardState(a,n.value),n.style.transform="scale(0.9)",setTimeout(()=>{n.style.transform="scale(1)"},200))}}t.forEach(t=>{t.addEventListener("click",function(t){t.preventDefault(),a(this)}),t.addEventListener("touchend",function(t){t.preventDefault(),a(this)})}),e.forEach(t=>{t.addEventListener("click",function(t){t.preventDefault(),o(this)}),t.addEventListener("touchend",function(t){t.preventDefault(),o(this)})}),n.forEach(t=>{t.addEventListener("input",function(){const t=this.closest(".quantity-card");let e=parseInt(this.value)||0;e<0&&(e=0,this.value=e),updateCardState(t,e)}),t.addEventListener("blur",function(){let t=parseInt(this.value)||0;t<0&&(t=0),this.value=t})})}function updateCardState(t,e){parseInt(e)>0?t.classList.add("has-quantity"):t.classList.remove("has-quantity")}function initQuoteFormSubmission(){const t=document.getElementById("contact-form");t&&t.addEventListener("submit",async function(e){if(e.preventDefault(),!validateForm())return;const n=new FormData(t),a={};n.forEach((t,e)=>{a[e]=t});const o=t.querySelector('button[type="submit"]'),r=o.textContent;if(o.disabled=!0,o.innerHTML='<span style="display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite;"></span> Sending...',!document.getElementById("spinner-style")){const t=document.createElement("style");t.id="spinner-style",t.textContent="@keyframes spin { to { transform: rotate(360deg); } }",document.head.appendChild(t)}try{const e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:3000/api/quote":"/api/quote",n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)}),o=await n.json();n.ok&&o.success?(showThankYouModal(),t.reset(),document.querySelectorAll(".quantity-card").forEach(t=>{t.classList.remove("has-quantity")})):showAlert("error",o.message||"There was an error submitting your request. Please try again or call us at 770-328-2920.")}catch(t){console.error("Error:",t),showAlert("error","Unable to connect to the server. Please try again or call us at 770-328-2920.")}finally{o.disabled=!1,o.textContent=r}})}function validateForm(){const t=document.getElementById("contact-form"),e=t.querySelector('[name="name"]').value,n=t.querySelector('[name="email"]').value,a=t.querySelector('[name="phone"]').value,o=t.querySelector('[name="event-date"]').value;if(!(e&&n&&a&&o))return showAlert("error","Please fill out all required fields."),!1;const r=t.querySelectorAll(".qty-input");let i=!1;return r.forEach(t=>{parseInt(t.value)>0&&(i=!0)}),!!i||(showAlert("error","Please select at least one rental item for your quote."),!1)}function formatItemsForEmail(t){let e="\n\n=== RENTAL ITEMS REQUESTED ===\n";const n={TENTS:["tent-20x20","tent-20x30","tent-30x40","tent-40x60"],TABLES:["table-6ft","table-8ft","table-60round","table-cocktail"],CHAIRS:["chair-white","chair-wood","chair-chiavari"],LIGHTING:["lights-string","lights-uplight"],ACCESSORIES:["dancefloor","bar"]},a={"tent-20x20":"20x20 Frame Tent","tent-20x30":"20x30 Frame Tent","tent-30x40":"30x40 Frame Tent","tent-40x60":"40x60 Pole Tent","table-6ft":"6ft Rectangular Table","table-8ft":"8ft Rectangular Table","table-60round":'60" Round Table',"table-cocktail":"Cocktail Table","chair-white":"White Folding Chair","chair-wood":"Wood Folding Chair","chair-chiavari":"Chiavari Chair","lights-string":"String Lights (100ft)","lights-uplight":"Uplighting Fixture",dancefloor:"Dance Floor (4x4 section)",bar:"Bar (6ft)"};return Object.keys(n).forEach(o=>{let r=!1,i="";n[o].forEach(e=>{const n=t.get(e);n&&parseInt(n)>0&&(r=!0,i+=`  â€¢ ${a[e]}: ${n}\n`)}),r&&(e+=`\n${o}:\n${i}`)}),e}function showThankYouModal(){const t=document.getElementById("thank-you-modal");if(t){t.classList.add("active"),document.body.style.overflow="hidden";t.querySelector(".modal-backdrop").addEventListener("click",closeThankYouModal),document.addEventListener("keydown",handleEscapeKey)}}function closeThankYouModal(){const t=document.getElementById("thank-you-modal");t&&(t.classList.remove("active"),document.body.style.overflow="",document.removeEventListener("keydown",handleEscapeKey))}function handleEscapeKey(t){"Escape"===t.key&&closeThankYouModal()}function showAlert(t,e){if("function"==typeof window.showAlert)window.showAlert(t,e);else{const n=document.createElement("div");n.className=`alert alert-${t}`,n.style.cssText="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 10000; max-width: 500px; animation: fadeIn 0.3s;",n.textContent=e,document.body.appendChild(n),setTimeout(()=>{n.style.opacity="0",setTimeout(()=>n.remove(),300)},5e3)}}document.addEventListener("DOMContentLoaded",function(){initQuantitySelectors(),initQuoteFormSubmission(),setMinimumEventDate()});